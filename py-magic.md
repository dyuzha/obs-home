> Back
> [[py-oop]]
# Конструирование и инициализация
---

## `__new__`
---
>[!Note] Sample
```python
__new__(cls, [...])
```
- Это первый метод, который будет вызван при инициализации объекта. Он принимает в качестве параметров класс и потом любые другие аргументы, который переданы в  `__init__`

*P.S. Хорошо описан в документации*


## `__init__`
---
>[!Note] Sample
```python
__init__(self, [...])
```
- Инициализатор класса. Ему передается все, с чем был вызван первоначальный конструктор. 

>[!Example]
```python
class FileObject:
    def __init__(self, filepath='puth/to/file', filename='sample.txt'):
        self.file = open(join(filepath, filename), 'r+')

    def __del__(self):
    self.file.close()
    del self.file
```


## `__del__` 
---
>[!Note] Sample
```python
__del__(self)
```
- Деструктор объекта. 
>[!Info] `__del__` всегда вызывается по завершении работы интерпритатора


# Менеджеры контекста
---
**Менеджеры контекста** позволяют выполнить какие-либо действия для настройки или очистки, когда создание объекта обернуто в оператор with.
- Поведение менеджера контекста определяется двумя магическими методами.

## `__enter__` 
---
`__enter__(self)`
Определяет, что должен сделать менеджер контекста в начале блока, созданного оператором **with**. 
- Возвращаемое `__enter__` значение и есть то значение, с которым производиться работа внутри **with**.



## `__exit__` 
---
 `__exit__(self, exception_type, exception_value, traceback)`
 Определяет действия **менеджера контекста** после того, как блок будет выполнен (или прерван во время работы). Может использоваться для контролирования исключений, чистки, любых действий которые должны быть выполнены незамедлительно после блока внутри **with**. Если блок выполнен успешно, `exception_type`, `exception_value` и `trace_back`, будут установлены в **None**.

В другом случае вы сами выбираете, перехватывать ли исключение или предоставить это пользователю.
- Если вы решили перехватить исключение - убедитесь, что `__exit__` возвращает `True`, после того как все сказано и сделано.
- Если вы решили что исключение не будет перехвачено **менеджером**, просто позвольте ему случиться.


