---
id: units
aliases:
  - units
  - systemd-units
tags: []
---

# systemd-units
---
Абстракция системных ресурсов.
Их конфигурация описывается в декларативных файлах `/usr/lib/systemd/system/`.
*Переопределяются в `/etc/systemd/system`*.

## Основные типы юнитов
---

1. Service
Описывает процесс (демон) и комманды управления им (`ExecStart=`, `ExecStop=`).

2. Socket
(???) Описывает соке (сетевой, IPC или FIFO).
Механизм *socket-based activation*:
**Systemd** прослушивает сокет и запускает соответсвуюший сервис (`.service`) только при поступлении первого подключения (Экономит ресурсы для редко использкемых служб).

3. Timer
Альтернатива `cron`. Позволяет планировать задачи на основе календарных выражений (`OnCalendar=*-*-* 00:00:00`) или относительных интервалов (`OnBootSec=`, `OnUnitActiveSec=`).

4. Mount и Autmount
[[mount_autmount-unit.md]]
Точки монтирования.
Autmount - обеспечивает отложенное монтирование в момент первого обращения к каталогу

5. Path
Аналог `incron`.
Активирует сервис при изменении файловой системы. (например, появление файла в определенном каталоге).

6. Target
Аналог `runlevel` из SysVinit, но более гибкий.
Это группа юнитов, которую нужно достич (например, `multi-user.target` - многопользовательский режим без GUI).

7. swap

8. slice
## Структура файла юнита
---
Каждый файл разбит на секции


1. **Типовые разделы** (зависят от типа юнита).
----
Обязательны для данного типа.
Определяют поведение конкретного типа юнита.
Например:
- `[Service]`  для `.service`;
- `[Timer]` для `.timer`;
- ...

2. **Общие разделы**
---
- 2.1. `[Unit]`
Обязателен для всех unit-файлов (хотябы в минимальном виде).
Описывает:
    - общие метаданные;
    - зависимости.

- 2.2. `[Install]`
Общий опциональный раздел.
Определяет, как юнит "встраивается" в систему.

- 2.3. `[X-...]`
Кастомные разделы.
Секции которые могут вводить дистрибутивы или разработчики приложений.
Systemd их игнорирует, но они могут использоваться внешними тулзами.
Например: `[X- Fleet]` в CoreOS



### Unit
---
Содержит общие метаданные (Описания, зависимости)
