---
id: Certs
aliases:
  - Certs
tags: []
---
**Back**
    [[!!Base]]

# Certs
---

## Что такое TLS/SSL
---

Secure Socket Layer и Transport Layer Security
Криптографические протоколы для обеспечения безопасности связи

- Для аутентификации используются асимметричные алгоритмы шифрования (открытый-закрытый ключ)
- Для сохранения конфидициальности - симметричные (секретный ключ)

Первый тип шифрования (ассимитричный) - очень ресурсоемкий, поэтому используется комбинация c симметричным типом шифрования, для сохранения высокой скорости обработки данных
sources: [habr](https://habr.com/ru/companies/1cloud/articles/326292/)


### Рукопожатие
---

#### Хронология
---
0 Пользователь заходит на вебсайт

1. Браузер запрашивает информацию о веб-сайте ->
2. Сервер отправляет копию своего *SSL* сертификата <-
3. Браузер проверяет подлинность сертификата и отправляет ключ серверу ->
4. Сервер зашифровывает полученную страницу публичным ключем и отправляет ее браузеру <-
5. Защищенное соединения установлено: Запросы шифруются публичными ключами сервера и браузера <->

Сервер расшифровывает предварительные секрет с помощью своего закрытого ключа,
Создается общий секрет (*master secret*), используя определенный вид шифрования

Теперь обе стороны пользуются симметричным ключем, который действителен, только для данной сессии.
После завершения сессии, ключ - уничтожается

При следующем посещении сайта, процесс рукопожатия повторяется


### Метод обмена ключами
---
SSL - RSA (назван в честь авторов Rivest, Shamir и Adleman

TLS -  Может использовать различные методы:
- Diffie-Hellman;
- Elliptic Curve Diffie-Hellman;
- ...


### Алгоритмы шифрования
---
SSL:
- DES
- RC4
- 3DES

TLS:
- AES
- Camelia


## Виды сертификатов для доменов
---

- По количеству информации
- По количеству доменов
    - Однодоменные
    - Мультидоменные
    - Поддоменные

### Виды (По количеству информации)
---

#### Domain Validation
---
Сертификаты с проверкой домена
- Подходят для некомерческих сайтов
- Самый дешевый
- Популярный
Так они подтверждают только веб-сервер, обслуживающий определенный сайт, на который был осуществлен переход.
- Не может считаться полностью безопасным, так как содержит только информацию о зарегистрированном доменном имени.


#### Organization Validation
---
Сертификаты с проверкой организации
- Подтверждают еще регистрационные данные комании-владельца
*Эту информацию юр лицо обязано предоставить при покупке сертификата, а удостоверяющий центр может связаться напрямую с компанией для подтверждения этой информации*
- Отвечает стандартам *RFC* и содержит информацию о том, кто его подтвердил
- Данные владельца не отображаются
- Более надежный чем *Domain Validation*


#### Extended Validation
---
Сертификат с расширенной проверкой

- Нужен веб-сайтам, проводящим финансовые транзакции и требуют высокий lvl конфиденциальности
- Самый надежный
*Зеленный замочек и ярлык в браузере*

При этом многие сайты предпочитают перенаправлять пользователей для совершения платеже на внешние ресурсы с *Расширенной проверкой*, используя сертификаты *OV*, которых хватает для защиты остальных данных пользователей


### Виды (По количеству доменов)
---

#### Single Certificate
---
Однодоменные сертификаты - привязываются к одному домену, который указывается при покупки


#### Мульти доменные
---
За включение дополнительных доменов, (свыше нормы), платится отдельно!

-  Multi Domain Certificate
-  Unified Communications Certificate
-  Subject Alternative Name


#### Поддоменные сертификаты (WildCard)
---
Охватывают все поддомены указанного при регистрации доменного имени.

- Comodo PositiveSSL Multi-Domain WildCard
- Comodo  Multi-Domain WildCard SSL
- Обычный мультидоменный
В списке доменов можно указать нужные поддоменные имена



## Сертификаты для кириллического домена
---
**Punycode** - Регламентирует преобразование национального названия домена в название в английском алфавите.
```
Кириллический домен              Преобразованный домен
       мвд.рф            -->        xn--b1aew.xn--p1ai
```
Именно преобразованный домен, отправится в системму доменных имен для получения IP-хоста.
=> Национальные доменные имена обрабатываются несколько сложнее, чем доменные имена на анлийском
=> Поддержка национальных доменов является дополнительной опцией



## Способы получения сертификатов
---

### Самостоятельные
---
Цель: сгенерировать пару ключей (можно ч/з любой генератор)
н-р OpenSSL

Такой канал можно использовать для внутренних целей (связи между устройствами своей сети или приложениями)
Для вебсайта нужен оффициальный сертификат, чтобы в цепочке подтверждения сертификатов имелся корневой сертификат.
Браузеры не показывали сообщения о небезопасном соединении, а пользователи были спокойны за свои данные


#### ACME
---
Automatic Certificate Management Environment
Протокол, разработанный для упрощения и автоматизации получения и управления сертификатами SSL/TLS

[[ACME]]
