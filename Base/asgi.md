---
id: asgi
aliases: []
tags: []
---
**Back**
    [[!!Base]]

# ASGI
---
Asynchronous Server Gateway Interface

Состоит из двух различных компонентов:
1. *Protocol server* (сервер протокола) - слушает сокеты и преобразует их в соединения и сообщения о событиях внутри каждого соединения.
2. *Application* (прложение) - живет внутри серевера протокола, его экземпляр создается один раз для каждого соединения и обрабатывает сообщения о событиях по мере их возникновения

*ASGI* указывает:
- Формат сообщения
- То как эти сообщения должны передаваться между приложением и сервером протокола, который его запускает

```
Client   <----->       Protocol       <----->  App
                    Implementation
```

*ASGI* опирается на простую модель:
1. Клиент подключается к серверу, создается экземпляр приложения
2. Входящие данные передаются в приложение
3. Возвращаемые данные передаются клиенту

Передача данных в приложение означает вызов приложения (как если бы оно было функцией, т.е. тем что принимает входные даннык и возвращает выходные)

Все что предстваляет собой *ASGI*-приложение это callable (вызываемый) объект
Параметры вызываемого объекта - определяются спецификацией *ASGI*
```python
async def app(scope, receive, send):
    """
    scope - словарь, содержащий информацию о входящем запросе,
        его содержимое отличается для HTTP и WebSocket
    receive - асинхронная функция для получения сообщеений о событиях ASGI
    send - асинхронная функция для отправки сообзений о событиях
    """
    ...
```
Сигнатура функции - это **i** в **ASGI** (интерфейс), который должно реализовать приложение, чтобы сервер смог его вызвать

Эти параметры позволяют:
- Получать (Receive) данные
- Отправлять (Send) данные
     По каналу связи
- Понимать в каком контексте (scope) этот канал создан

Примеры **ASGI**:
- uvicorn






