# Применение пространства имен в контейнерах
---


Пространство имен дает процессам, запущенным в контейнерах, иллиюзию, что они имеют свои собственные ресурсы. Основная цель изоляции процессов состоит  в предотвращении вмешательства процессов одного контейнера в работу других контейнеров, а также работу хостовой машины.

Основнве технологии контейнирезации: 
- LXC
- Docker

В основ всех технологий контейнеризации лежат пространства имен и они имеют одинаковый принцип работы.

## Изоляция процессов
---
Технология контейнеризации обеспечивает изоляцию процессов путем переноса процессов, запущенных в контейнере, в собственное пространство имен и ограничения прав и видимости процессов, запущенных в других контейнерах и на самой хостовой машине
- Это работает при поддержке пространства имен PID, которое изолирует пространство идентификаторов процесса контейнера от простого хоста

- Т.к. пространство имен иерархично, то процесс может видеть только процессы в своем собрственном пространстве имен, либо в дочернем пространстве имен.

- После создания и присвоения пространства имен контейнеру, хостовая машина может видеть и взаимодействовать с пространством идентификаторов процесса контейнера, но процесс внутри контейнера не может видеть и что-либо делать с пространством хоста или другого контейнера.

## Изоляция файловой системы
---
Для достижения защищенности контейнеров и хостовой машины от нелегитимных процессов и модификаций с файловой системой необходима изоляция файловых систем.

Технология контейнеризации использует пространство имен файловой системы для изоляции файловой системы, иерархично связанной с другими контейнерами. Это пространство предоставляет процессам каждого контейнера различное представление дерева файловой системы и ограничивает все события монтирования, происходящие внутри контейнера.


## Изоляция IPC
---
Процессы, запущенные в контейнерах, должны быть ограничены так, чтобы они могли взаимодействовать только через определенный набор ресурсов IPC и им было запрещено вмешиваться в работу контейнеров и хост-машины.

Технология контейнеризации достигает изоляции IPC исполльзованием пространств имен IPC

Процесс в пространстве имен IPC не может писать или читать IPC-ресурсы, принадлежащие другому пространству имен.

Технология контейнеризации присваивает свое пространство имен IPC каждому контейнеру, таким образом, не давая процессам в контейнере вмешиваться в другие контейнеры.

## Изоляция сетей
---
- Изоляция сети важна для предотвращения сетевых атак, таких как "человек посередине". 
- Контейнеры должны быть настроены таким образом, чтобы они не могли подслушивать и управлять сетевым трафиком других контейнеров или хоста.

Для каждого контейнера технология контейнеризации создает независимый сетевой стек при помощи пространства имен сети.

## Изоляция пользователей
---
Только с появлением пространства имен пользователей стала возможна полная изоляция контейнеров от хостовой машины.
-> Потому что до появления этого пространства, пользователь имед ID 0 в контейнере, то есть был пользователем root в этом контейнере, и при этом имел такой же id внутри хостовой машины, что создавала большую угрозу для всей системы

## Изоляция UTS
---
Благодаря пространству имен UTS каждый контейнер может иметь свое собственное доменное имя NIS и имя контейнера
- Это является важным фактором для многих приложений, веб-сервисов, контейнеров

# Безопасность
---
Хоть пространство имен IPC покрывает большинтсво методов межпроцессных взаимодействий, существуют исключения.
Например: 
- Transperent Inter-Process Communication - это сетевой протокол, созданный для взаимодействия в кластерных системах. Использование такого метода взаимодействия нарушает изоляцию IPC между контейнерами.
