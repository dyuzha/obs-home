---
id: "!Docker"
aliases:
  - "!Docker"
  - Docker
tags: []
---

# Docker
---
- [[linux-lab]] - Тестовая среда

- [[drivers]]
[[volumes]]
- [[dockerfile]]
- [Architecture](architecture)
- [Chroot](chroot)
- [Hand](hand)
- [Namespaces](namespace.md)
  - [Namespace-containers](namespace-container.md)

[[dockerfile]]
Основные иснтрукции в dockerfile
- ADD
    - Варианты использования
    - Кеширование
- RUN
- CMD
- ENTRYPOINT
- VOLUME


## What is Docker?
---
Открытая open-source платформа для автоматического
- развертывания,
- масштабирования
... приложений, путем их изоляции в легковесные, портативные контейнеры
- Построен на клиент-серверной архитектуре

В его состав входит:
- **dockerd**  - демон стоит на сервере
- API, оперделяющие интефейсы, которые прораммы могут использовать для взаимодействия с **dockerd** и передачи ему инструкций
- CLI client docker
  CLI использует Docker API для контроля и взаимодействия c dockerd через скрипты  или прямые команды
  *(Большинство сторонних приложений используют API и CLI)*


## Introduction
---

### 1. What are containers?
---

**Контейнеры** - это легковесная, портативная и изолированная программная среда
- позволяет запускать и упаковывать приложения со всеми зависимостями единообразно на разных платформах
- Они помогают оптимизировать процессы
  - разработки,
  - развертывания,
  - управления приложениями,
- Гарантируют бесперебойную работу **независимо от базовой инфраструктуры**.

### 2. Для чего можно использовать Docker?
---
- Оптимизирует жизненный цикл разработки, позволяя разработчикам работать в стандартизированных средах, используя локальные контейнеры.
Контейнеры отлично подходят для рабочих процессов непрерывной интеграциии и непрерывыной поставки **Continuous Integration and Continuos Delivery (CI/CD)

### Возможные сценарии
---
- Разработчики пишут код локально и делятся работой с коллегами с помощи контейнеров Docker
- Размещения своих приложений в тестовой среде и запуска автоматизированных и ручных тестов
- При обнаружении ошибок, исправление и повторное развертование может проходить в тестовой среде для тестирования и проверки
- После завершения тестирования предоставить исправление клиенту также просто, как загрузить обновленный образ в производственную среду
**Контейнеры** решают проблему несовместимости


### 3. Bare Metal vs VM vs Containers
---

#### Bare Metal
---
- Высокая производительность
- Низкая адаптивность
- Можно запустить только одно приложение на сервере
- Нельзя легко перенести на другой сервер


#### VMs
---
**Виртуальные машины**
- Можно запустить несколько приложений на одном сервере *(на разных VMs)*
- Каждая VM запущена на гипервизоре *(программном обеспечение эмулирующем железо)*
- Гипервизор позволяет запустить несколько приложений на одном сервере, а также предоставляет изоляцию между приложениями, запущенными на разных VMs.


#### Containers
---
**Контейнеры**
- Можно запустить несколько приложений на одном сервере, без гипервизора
- Каждый контейнер запущен на контейнерном движке, который является частью ПО для эмуляуии ОС на ПК.


### 4. Docker and OCI
---

**Open Container Initiative** - Linux Foundation project

**Goal**:
Создание отраслевого стандарта для
  - форматов контейнеров
  - и сред выполнения
Гарантия совместимость и взаимодействие  контейнерных сред, посредством определенных технических спецификаций


## Underlying Technologies
---

### What are Namespaces?
---
Пространство имен Docker - это фундаментальная функция Linux, которую Docker использует для создания изолированных сред для контейнеров.
- Оно обеспечивает уровень изоляции
  - создавая отдельные экземпляры глобальных системных ресурсов
  - заставляя каждый контейнер полагать, что у него есть свой собственный уникальный набор ресурсов
Docker использует несколько типов пространств имен
- PID (Process ID)
- NET (Network)
- MNT (Mount)
- UTS (Unix Timesharing System)
- IPC (Inter Process Communication)
- Пространство имен USER

### Cgroups
---
**Control groups** - функция ядра линукс, позволяющая распределять и управлять ресурсами, такими как:
- CPU
- Mem
- Network bandwidth (Пропускная способность сети)
- I/O (Ввод/Ввывод)
среди групп процессов запущенных в системе

- Это позволяет изолировать и ограничивать ресурсы, которые может использовать контейнер
