---
id: nvim
aliases: []
tags: []
---

# Lsp
---
gr - Показать ссылки переменной

## Разница между api и fn
---
- Vim.api:
    - Предоставляет более современный и удобный интерфейс для работы с Vimscript функциями.
    - Поддерживает асинхронные операции и предоставляет более широкий спектр функций.
    - Позволяет создавать плагины и скрипты, которые могут работать параллельно с другими плагинами и скриптами.

- Vim.fn:
    - Является более традиционным интерфейсом для вызова функций Vimscript.
    - Не поддерживает асинхронные операции.
    - Может быть менее удобным для использования в сложных сценариях.

### api
---

#### nvim_echo
---
Используется для отображения сообщений в командной строке редактора.
*Она позволяет разработчикам выводить информацию, предупреждения или сообщения об ошибках прямо в интерфейс пользователя.*

> [[!example]]
```lua
vim.api.nvim_echo({
  { "Failed to clone lazy.nvim:\n", "ErrorMsg" },
  { out,                            "WarningMsg" },
  { "\nPress any key to exit..." },
}, true, {})
-- true/false - сообщение должно отображаться в режиме реального времени/ после выполнения функции
-- {} дополнительные параметры
-- В данном контексте словарь не содержит key и value, которые могли бы изменить поведение функции
```

### fn
---
Пространство имен для вызова функций и переменных

## getchar()
---
Позволяет считывать символ, введённый пользователем с клавиатуры, и использовать его в различных сценариях внутри Neovim.


#### stdpath(path)
---
Позволяет получить доступ к директориям
> [!Example]
```lua
--  позволяет получить путь к директории данных Neovim и использовать его в различных сценариях, например, для загрузки плагинов или сохранения настроек.
vim.fn.stdpath("data")
```

#### system(command)
---
Позволяет выполнять внешние команды
> [!Example]
```lua
-- Выполняется внешняя функция git clone со всеми параметрами,
-- lazyrepo - путь к директории для клонирование
-- lazypath - путь к конечной директории (куда клонировать)
-- Результат записывается в переменную "out"

local out = vim.fn.system({ "git", "clone", "--filter=blob:none", "--branch=stable", lazyrepo, lazypath })
```

## Асинхронность

>[!Example]
```lua
-- Проверяет есть ли информация про файл в переменной lazypath
-- Если нет выполняет функцию
if not (vim.uv or vim.loop).fs_stat(lazypath) then
-- ...
end
```

fs_stat(lazypath): функция, которая выполняет операцию stat (получение информации о файле или директории) над путём lazypath. Возвращает результат операции.

### uv
---
Модуль, который предоставляет асинхронные функции для работы с файловой системой.

### loop
---
Альтернативный модуль для асинхронных операций, может использоваться вместо vim.uv.


## More
---

### opt
Предоставляет api к настройкам

#### rtp
---
**runtime path** - предоставляет пути для поиска плагинов

> ![Example]
```lua
-- Добавляет путь (в переменной lazypath) - в начало rdp
vim.opt.rtp:prepend(lazypath)
```
### ui
---
Позволяет взаимодействовать с пользовательским интерфейсом

### select
---
Позволяет выбрать из списка
```lua
vim.ui.select(
    { {'one', 'two'} },
    {}, -- {prompt = "Selected to "}
    function(selection)
    print("\n" .. selection)
    end
)
-- or (for test)
:lua vim.ui.select( {'one', 'two'} , {}, function(selection) print("\n" ..selection) end)
```

### input
---
Позволяет ввести текст
> [[!Example]]
```lua
vim.ui.input(
    {prompt = "Enter input: "},
    -- Функция для обработки ввода
    function(input) print("\n" .. input)
    end
    )
-- or (for test)
:lua vim.ui.input( {prompt = "Enter input: "}, function(input) print("\n" .. input) end)
```
